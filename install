BPurple='\033[1;35m'
BYellow='\033[1;33m'
Color_Off='\033[0m' 

set -e

# Clone dotfiles
echo -e "${BPurple}copying dotfiles ðŸ’Ž${Color_Off}"
clone_path="${clone_path:-"${HOME}/dotfiles"}"
# This is used to locally develop the install script.
if [ "${DEBUG}" == "1" ]; then
    cp -R "${PWD}/." "${clone_path}"
else
    git clone https://github.com/joshwrn/dotfiles "${clone_path}"
fi
rsync -a "${clone_path}/." "${HOME}"


sudo apt-get update && sudo apt-get install -y fzf

sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended || true
git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k || true

 cat << EOF >> ${HOME}/.bashrc
 ./zshrc
EOF

 cat << EOF >> ${HOME}/.zshrc
 if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

 export ZSH="$HOME/.oh-my-zsh"
 ZSH_THEME="powerlevel10k/powerlevel10k"
 source $ZSH/oh-my-zsh.sh

 export FZF_DEFAULT_OPTS='
  --color=bg+:-1,bg:-1,spinner:#a9b1d6,hl:#bb9af7
  --color=fg:#565f89,header:#7aa2f7,info:#7aa2f7,pointer:#a9b1d6
  --color=marker:#a9b1d6,fg+:#a9b1d6,prompt:#a9b1d6,hl+:#a9b1d6
   '

 # To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
EOF

# Done!
echo -e "${BPurple}Success! Restart terminal to get started. ðŸš€${Color_Off}"
exit 0
